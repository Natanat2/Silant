openapi: 3.0.3
info:
  title: Название вашего API
  version: 1.0.0
  description: Описание вашего API
paths:
  /api/complaints/:
    get:
      operationId: complaints_list
      tags:
      - complaints
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Complaints'
          description: ''
    post:
      operationId: complaints_create
      tags:
      - complaints
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ComplaintsCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ComplaintsCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ComplaintsCreateUpdateRequest'
        required: true
      security:
      - jwtAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComplaintsCreateUpdate'
          description: ''
  /api/complaints/{id}/:
    get:
      operationId: complaints_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Рекламация.
        required: true
      tags:
      - complaints
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Complaints'
          description: ''
    put:
      operationId: complaints_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Рекламация.
        required: true
      tags:
      - complaints
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ComplaintsCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ComplaintsCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ComplaintsCreateUpdateRequest'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComplaintsCreateUpdate'
          description: ''
    patch:
      operationId: complaints_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Рекламация.
        required: true
      tags:
      - complaints
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedComplaintsCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedComplaintsCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedComplaintsCreateUpdateRequest'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComplaintsCreateUpdate'
          description: ''
    delete:
      operationId: complaints_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Рекламация.
        required: true
      tags:
      - complaints
      security:
      - jwtAuth: []
      responses:
        '204':
          description: No response body
  /api/maintenance/:
    get:
      operationId: maintenance_list
      tags:
      - maintenance
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Maintenance'
          description: ''
    post:
      operationId: maintenance_create
      tags:
      - maintenance
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MaintenanceCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MaintenanceCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MaintenanceCreateUpdateRequest'
        required: true
      security:
      - jwtAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MaintenanceCreateUpdate'
          description: ''
  /api/maintenance/{id}/:
    get:
      operationId: maintenance_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Техническое обслуживание.
        required: true
      tags:
      - maintenance
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Maintenance'
          description: ''
    put:
      operationId: maintenance_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Техническое обслуживание.
        required: true
      tags:
      - maintenance
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MaintenanceCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MaintenanceCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MaintenanceCreateUpdateRequest'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MaintenanceCreateUpdate'
          description: ''
    patch:
      operationId: maintenance_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Техническое обслуживание.
        required: true
      tags:
      - maintenance
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedMaintenanceCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedMaintenanceCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedMaintenanceCreateUpdateRequest'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MaintenanceCreateUpdate'
          description: ''
    delete:
      operationId: maintenance_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Техническое обслуживание.
        required: true
      tags:
      - maintenance
      security:
      - jwtAuth: []
      responses:
        '204':
          description: No response body
  /api/service/:
    get:
      operationId: service_list
      parameters:
      - in: query
        name: machine_factory_number
        schema:
          type: string
        description: Filter by machine factory number
      tags:
      - service
      security:
      - jwtAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MachinePublic'
          description: ''
    post:
      operationId: service_create
      tags:
      - service
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MachinePublicRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MachinePublicRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MachinePublicRequest'
        required: true
      security:
      - jwtAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MachinePublic'
          description: ''
  /api/service/{id}/:
    get:
      operationId: service_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Машина.
        required: true
      tags:
      - service
      security:
      - jwtAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MachinePublic'
          description: ''
    put:
      operationId: service_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Машина.
        required: true
      tags:
      - service
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MachinePublicRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MachinePublicRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MachinePublicRequest'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MachinePublic'
          description: ''
    patch:
      operationId: service_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Машина.
        required: true
      tags:
      - service
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedMachinePublicRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedMachinePublicRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedMachinePublicRequest'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MachinePublic'
          description: ''
    delete:
      operationId: service_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Машина.
        required: true
      tags:
      - service
      security:
      - jwtAuth: []
      responses:
        '204':
          description: No response body
  /api/token/:
    post:
      operationId: token_create
      description: |-
        Takes a set of user credentials and returns an access and refresh JSON web
        token pair to prove the authentication of those credentials.
      tags:
      - token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenObtainPair'
          description: ''
  /api/token/refresh/:
    post:
      operationId: token_refresh_create
      description: |-
        Takes a refresh type JSON web token and returns an access type JSON web
        token if the refresh token is valid.
      tags:
      - token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRefresh'
          description: ''
components:
  schemas:
    Complaints:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        machine:
          $ref: '#/components/schemas/Machine'
        failure_node:
          $ref: '#/components/schemas/Nodes'
        method_of_recovery:
          $ref: '#/components/schemas/MethodsOfRecovery'
        service_company_maintenance:
          $ref: '#/components/schemas/UserDirectory'
        date_of_refusal:
          type: string
          format: date
          title: Дата отказа
        operating_time_refusal:
          type: integer
          title: Наработка, м/час
        description_of_refusal:
          type: string
          nullable: true
          title: Описание отказа
          maxLength: 128
        spare_parts_used:
          type: string
          nullable: true
          title: Используемые запасные части
          maxLength: 128
        restoration_date:
          type: string
          format: date
          title: Дата восстановления
        downtime:
          type: integer
          readOnly: true
          title: Время простоя
      required:
      - date_of_refusal
      - downtime
      - failure_node
      - id
      - machine
      - method_of_recovery
      - operating_time_refusal
      - service_company_maintenance
    ComplaintsCreateUpdate:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        machine:
          type: integer
        failure_node:
          type: integer
        method_of_recovery:
          type: integer
        service_company_maintenance:
          type: integer
        date_of_refusal:
          type: string
          format: date
          title: Дата отказа
        operating_time_refusal:
          type: integer
          title: Наработка, м/час
        description_of_refusal:
          type: string
          nullable: true
          title: Описание отказа
          maxLength: 128
        spare_parts_used:
          type: string
          nullable: true
          title: Используемые запасные части
          maxLength: 128
        restoration_date:
          type: string
          format: date
          title: Дата восстановления
        downtime:
          type: integer
          readOnly: true
          title: Время простоя
      required:
      - date_of_refusal
      - downtime
      - failure_node
      - id
      - machine
      - method_of_recovery
      - operating_time_refusal
      - service_company_maintenance
    ComplaintsCreateUpdateRequest:
      type: object
      properties:
        machine:
          type: integer
        failure_node:
          type: integer
        method_of_recovery:
          type: integer
        service_company_maintenance:
          type: integer
        date_of_refusal:
          type: string
          format: date
          title: Дата отказа
        operating_time_refusal:
          type: integer
          title: Наработка, м/час
        description_of_refusal:
          type: string
          nullable: true
          minLength: 1
          title: Описание отказа
          maxLength: 128
        spare_parts_used:
          type: string
          nullable: true
          title: Используемые запасные части
          maxLength: 128
        restoration_date:
          type: string
          format: date
          title: Дата восстановления
      required:
      - date_of_refusal
      - failure_node
      - machine
      - method_of_recovery
      - operating_time_refusal
      - service_company_maintenance
    ControlledBridgeModel:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        controlled_bridge_model_name:
          type: string
          title: Модель управляемого моста
          maxLength: 16
      required:
      - controlled_bridge_model_name
      - id
    ControlledBridgeModelRequest:
      type: object
      properties:
        controlled_bridge_model_name:
          type: string
          minLength: 1
          title: Модель управляемого моста
          maxLength: 16
      required:
      - controlled_bridge_model_name
    EngineModel:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        engine_model_name:
          type: string
          title: Модель двигателя
          maxLength: 16
      required:
      - engine_model_name
      - id
    EngineModelRequest:
      type: object
      properties:
        engine_model_name:
          type: string
          minLength: 1
          title: Модель двигателя
          maxLength: 16
      required:
      - engine_model_name
    LeadBridgeModel:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        lead_bridge_model_name:
          type: string
          title: Модель ведущего моста
          maxLength: 16
      required:
      - id
      - lead_bridge_model_name
    LeadBridgeModelRequest:
      type: object
      properties:
        lead_bridge_model_name:
          type: string
          minLength: 1
          title: Модель ведущего моста
          maxLength: 16
      required:
      - lead_bridge_model_name
    Machine:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        machine_factory_number:
          type: string
          title: Зав. № машины
          maxLength: 16
      required:
      - id
      - machine_factory_number
    MachineModel:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        machine_model_name:
          type: string
          title: Модель техники
          maxLength: 16
      required:
      - id
      - machine_model_name
    MachineModelRequest:
      type: object
      properties:
        machine_model_name:
          type: string
          minLength: 1
          title: Модель техники
          maxLength: 16
      required:
      - machine_model_name
    MachinePublic:
      type: object
      properties:
        machine_factory_number:
          type: string
          title: Зав. № машины
          maxLength: 16
        machine_model:
          $ref: '#/components/schemas/MachineModel'
        engine_model:
          $ref: '#/components/schemas/EngineModel'
        engine_factory_number:
          type: string
          title: Зав. № двигателя
          maxLength: 16
        transmission_model:
          $ref: '#/components/schemas/TransmissionModel'
        transmission_factory_number:
          type: string
          title: Зав. № трансмиссии
          maxLength: 16
        lead_bridge_model:
          $ref: '#/components/schemas/LeadBridgeModel'
        lead_bridge_factory_number:
          type: string
          title: Зав. № ведущего моста
          maxLength: 16
        controlled_bridge_model:
          $ref: '#/components/schemas/ControlledBridgeModel'
        controlled_bridge_factory_number:
          type: string
          title: Зав. № управляемого моста
          maxLength: 16
      required:
      - controlled_bridge_factory_number
      - controlled_bridge_model
      - engine_factory_number
      - engine_model
      - lead_bridge_factory_number
      - lead_bridge_model
      - machine_factory_number
      - machine_model
      - transmission_factory_number
      - transmission_model
    MachinePublicRequest:
      type: object
      properties:
        machine_factory_number:
          type: string
          minLength: 1
          title: Зав. № машины
          maxLength: 16
        machine_model:
          $ref: '#/components/schemas/MachineModelRequest'
        engine_model:
          $ref: '#/components/schemas/EngineModelRequest'
        engine_factory_number:
          type: string
          minLength: 1
          title: Зав. № двигателя
          maxLength: 16
        transmission_model:
          $ref: '#/components/schemas/TransmissionModelRequest'
        transmission_factory_number:
          type: string
          minLength: 1
          title: Зав. № трансмиссии
          maxLength: 16
        lead_bridge_model:
          $ref: '#/components/schemas/LeadBridgeModelRequest'
        lead_bridge_factory_number:
          type: string
          minLength: 1
          title: Зав. № ведущего моста
          maxLength: 16
        controlled_bridge_model:
          $ref: '#/components/schemas/ControlledBridgeModelRequest'
        controlled_bridge_factory_number:
          type: string
          minLength: 1
          title: Зав. № управляемого моста
          maxLength: 16
      required:
      - controlled_bridge_factory_number
      - controlled_bridge_model
      - engine_factory_number
      - engine_model
      - lead_bridge_factory_number
      - lead_bridge_model
      - machine_factory_number
      - machine_model
      - transmission_factory_number
      - transmission_model
    Maintenance:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        machine:
          $ref: '#/components/schemas/Machine'
        type_of_maintenance:
          $ref: '#/components/schemas/TypeOfMaintenance'
        organization_carried_maintenance:
          $ref: '#/components/schemas/OrganizationCarriedMaintenance'
        service_company_maintenance:
          $ref: '#/components/schemas/UserDirectory'
        date_of_maintenance:
          type: string
          format: date
          title: Дата проведения ТО
        operating_time:
          type: integer
          title: Наработка, м/час
        order_number:
          type: string
          title: № заказ-наряда
          maxLength: 32
        order_date:
          type: string
          format: date
          title: Дата заказ-наряда
      required:
      - date_of_maintenance
      - id
      - machine
      - operating_time
      - organization_carried_maintenance
      - service_company_maintenance
      - type_of_maintenance
    MaintenanceCreateUpdate:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        machine:
          type: integer
        type_of_maintenance:
          type: integer
        organization_carried_maintenance:
          type: integer
        service_company_maintenance:
          type: integer
        date_of_maintenance:
          type: string
          format: date
          title: Дата проведения ТО
        operating_time:
          type: integer
          title: Наработка, м/час
        order_number:
          type: string
          title: № заказ-наряда
          maxLength: 32
        order_date:
          type: string
          format: date
          title: Дата заказ-наряда
      required:
      - date_of_maintenance
      - id
      - machine
      - operating_time
      - organization_carried_maintenance
      - service_company_maintenance
      - type_of_maintenance
    MaintenanceCreateUpdateRequest:
      type: object
      properties:
        machine:
          type: integer
        type_of_maintenance:
          type: integer
        organization_carried_maintenance:
          type: integer
        service_company_maintenance:
          type: integer
        date_of_maintenance:
          type: string
          format: date
          title: Дата проведения ТО
        operating_time:
          type: integer
          title: Наработка, м/час
        order_number:
          type: string
          minLength: 1
          title: № заказ-наряда
          maxLength: 32
        order_date:
          type: string
          format: date
          title: Дата заказ-наряда
      required:
      - date_of_maintenance
      - machine
      - operating_time
      - organization_carried_maintenance
      - service_company_maintenance
      - type_of_maintenance
    MethodsOfRecovery:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name_of_method:
          type: string
          title: Способ восстановления
          maxLength: 32
      required:
      - id
    Nodes:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name_of_node:
          type: string
          title: Название Узла
          maxLength: 32
      required:
      - id
    OrganizationCarriedMaintenance:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name_organization:
          type: string
          title: Организация, проводившая ТО
          maxLength: 32
      required:
      - id
      - name_organization
    PatchedComplaintsCreateUpdateRequest:
      type: object
      properties:
        machine:
          type: integer
        failure_node:
          type: integer
        method_of_recovery:
          type: integer
        service_company_maintenance:
          type: integer
        date_of_refusal:
          type: string
          format: date
          title: Дата отказа
        operating_time_refusal:
          type: integer
          title: Наработка, м/час
        description_of_refusal:
          type: string
          nullable: true
          minLength: 1
          title: Описание отказа
          maxLength: 128
        spare_parts_used:
          type: string
          nullable: true
          title: Используемые запасные части
          maxLength: 128
        restoration_date:
          type: string
          format: date
          title: Дата восстановления
    PatchedMachinePublicRequest:
      type: object
      properties:
        machine_factory_number:
          type: string
          minLength: 1
          title: Зав. № машины
          maxLength: 16
        machine_model:
          $ref: '#/components/schemas/MachineModelRequest'
        engine_model:
          $ref: '#/components/schemas/EngineModelRequest'
        engine_factory_number:
          type: string
          minLength: 1
          title: Зав. № двигателя
          maxLength: 16
        transmission_model:
          $ref: '#/components/schemas/TransmissionModelRequest'
        transmission_factory_number:
          type: string
          minLength: 1
          title: Зав. № трансмиссии
          maxLength: 16
        lead_bridge_model:
          $ref: '#/components/schemas/LeadBridgeModelRequest'
        lead_bridge_factory_number:
          type: string
          minLength: 1
          title: Зав. № ведущего моста
          maxLength: 16
        controlled_bridge_model:
          $ref: '#/components/schemas/ControlledBridgeModelRequest'
        controlled_bridge_factory_number:
          type: string
          minLength: 1
          title: Зав. № управляемого моста
          maxLength: 16
    PatchedMaintenanceCreateUpdateRequest:
      type: object
      properties:
        machine:
          type: integer
        type_of_maintenance:
          type: integer
        organization_carried_maintenance:
          type: integer
        service_company_maintenance:
          type: integer
        date_of_maintenance:
          type: string
          format: date
          title: Дата проведения ТО
        operating_time:
          type: integer
          title: Наработка, м/час
        order_number:
          type: string
          minLength: 1
          title: № заказ-наряда
          maxLength: 32
        order_date:
          type: string
          format: date
          title: Дата заказ-наряда
    TokenObtainPair:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
          readOnly: true
      required:
      - access
      - refresh
    TokenObtainPairRequest:
      type: object
      properties:
        username:
          type: string
          writeOnly: true
          minLength: 1
        password:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - password
      - username
    TokenRefresh:
      type: object
      properties:
        access:
          type: string
          readOnly: true
      required:
      - access
    TokenRefreshRequest:
      type: object
      properties:
        refresh:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - refresh
    TransmissionModel:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        transmission_model_name:
          type: string
          title: Модель трансмиссии
          maxLength: 16
      required:
      - id
      - transmission_model_name
    TransmissionModelRequest:
      type: object
      properties:
        transmission_model_name:
          type: string
          minLength: 1
          title: Модель трансмиссии
          maxLength: 16
      required:
      - transmission_model_name
    TypeOfMaintenance:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        type_of_maintenance_name:
          type: string
          title: Вид ТО
          maxLength: 16
      required:
      - id
      - type_of_maintenance_name
    User:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        first_name:
          type: string
          title: Имя
          maxLength: 150
      required:
      - id
    UserDirectory:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        user:
          $ref: '#/components/schemas/User'
      required:
      - id
      - user
  securitySchemes:
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
